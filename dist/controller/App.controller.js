sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast"],(e,t)=>{"use strict";return e.extend("renumactionlistui.controller.App",{onInit:function(){var e=new sap.ui.model.json.JSONModel({widthPercentage:"40%"});this.getView().setModel(e,"view");this._manifestData=this.getOwnerComponent().getManifestEntry("sap.app");this._renumberActionListUri=this._manifestData.dataSources.RenumberActionList.uri},handleTypeMissmatch:function(e){var a=e.getSource().getFileType();a.map(function(e){return"*."+e});t.show("The file type *."+e.getParameter("fileType")+" is not supported. Please choose a CSV file.")},handleFileChange:function(e){var t=this;var a=t.getView().byId("renumberButton");a.setEnabled(false);var i=t.getView().byId("logTextArea");i.setValue("");var n=e.getSource();var r=n.getValue();if(r){var a=t.getView().byId("renumberButton");a.setEnabled(true)}},onRenumberPress:async function(){var e=this;try{var a=e.getView().byId("fileUploader");var i=document.getElementById(a.getId()+"-fu");var n=new FormData;n.append("file",i.files[0]);sap.ui.core.BusyIndicator.show(0);const t=await fetch(this._renumberActionListUri,{method:"POST",body:n});a.clear();var r=e.getView().byId("renumberButton");r.setEnabled(false);if(!t.ok){const e=await t.text();var s=this.getView().byId("logTextArea");s.setValue("Error:\n"+e)}else{const e=await t.blob();const a=document.createElement("a");a.href=window.URL.createObjectURL(e);a.download=t.headers.get("Content-Disposition").split("filename=")[1].replace(/"/g,"");document.body.appendChild(a);a.click();document.body.removeChild(a);var s=this.getView().byId("logTextArea");s.setValue("Success:\nA new file with renumbered Activity IDs has been created.")}}catch(e){t.show("Error uploading file: "+e.message)}finally{sap.ui.core.BusyIndicator.hide()}}})});
//# sourceMappingURL=App.controller.js.map